# ğŸŒŠ Liquidity Provision Flow Diagram

## Visual Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: User clicks "Liquidity Provision Management" card     â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  [ğŸ’° Liquidity Provision Management]               â”‚        â”‚
â”‚  â”‚  Manage pool entries and exits...                  â”‚        â”‚
â”‚  â”‚  [Click] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º             â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: Auto-send prompt to chat                              â”‚
â”‚                                                                  â”‚
â”‚  Prompt: "I want to add liquidity to a pool..."                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: Agent processes and responds with METADATA            â”‚
â”‚                                                                  â”‚
â”‚  Response: {                                                    â”‚
â”‚    content: "Let me help you add liquidity!",                  â”‚
â”‚    metadata: {                                                  â”‚
â”‚      action: "request_liquidity_provision",                    â”‚
â”‚      chain: "ethereum",                                         â”‚
â”‚      token0: "ETH",                                             â”‚
â”‚      token1: "1INCH",                                           â”‚
â”‚      amount0: "0.278",                                          â”‚
â”‚      amount1: "1.19",                                           â”‚
â”‚      feeTier: 100                                               â”‚
â”‚    }                                                            â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: Frontend detects metadata                             â”‚
â”‚                                                                  â”‚
â”‚  if (meta.action === 'request_liquidity_provision') {          â”‚
â”‚    await liquidity.handleLiquidityFromMetadata(meta)           â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 5: Call Mock API - getLiquidityQuote()                   â”‚
â”‚                                                                  â”‚
â”‚  â±ï¸  Delay: 1200ms (simulating network)                        â”‚
â”‚                                                                  â”‚
â”‚  Returns: {                                                     â”‚
â”‚    success: true,                                               â”‚
â”‚    quote: {                                                     â”‚
â”‚      chainId: 1,                                                â”‚
â”‚      token0: { symbol: "ETH", amount: "0.278", ... },          â”‚
â”‚      token1: { symbol: "1INCH", amount: "1.19", ... },         â”‚
â”‚      feeTier: 100,                                              â”‚
â”‚      feeTierLabel: "0.01%",                                     â”‚
â”‚      priceRange: {                                              â”‚
â”‚        min: "3200.28",                                          â”‚
â”‚        max: "3911.28",                                          â”‚
â”‚        current: "3556.00"                                       â”‚
â”‚      },                                                         â”‚
â”‚      estimatedApr: "24.5",                                      â”‚
â”‚      ...                                                        â”‚
â”‚    }                                                            â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 6: Render LiquidityPreviewCard                           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Preview Liquidity Position                        â”‚        â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚        â”‚
â”‚  â”‚                                                     â”‚        â”‚
â”‚  â”‚  ETH/1INCH            [0.01%]                      â”‚        â”‚
â”‚  â”‚                                                     â”‚        â”‚
â”‚  â”‚  Token Deposited                                   â”‚        â”‚
â”‚  â”‚  â€¢ ETH      0.278                                  â”‚        â”‚
â”‚  â”‚  â€¢ 1INCH    1.19                                   â”‚        â”‚
â”‚  â”‚                                                     â”‚        â”‚
â”‚  â”‚  Price Range                                       â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚        â”‚
â”‚  â”‚  â”‚ Min         â”‚  â”‚ Max         â”‚               â”‚        â”‚
â”‚  â”‚  â”‚ 3,200.28    â”‚  â”‚ 3,911.28    â”‚               â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚        â”‚
â”‚  â”‚                                                     â”‚        â”‚
â”‚  â”‚  Current: 3,556.00                                 â”‚        â”‚
â”‚  â”‚                                                     â”‚        â”‚
â”‚  â”‚  Fee Tier: 0.01%  |  Gas: 0.00024 ETH            â”‚        â”‚
â”‚  â”‚  APR: 24.5%       |  Share: 0.00012%             â”‚        â”‚
â”‚  â”‚                                                     â”‚        â”‚
â”‚  â”‚  [Cancel]  [Confirm Open Position] â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                  â”‚
â”‚  User clicks "Confirm" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 7: Execute liquidity provision                            â”‚
â”‚                                                                  â”‚
â”‚  liquidity.handleConfirmLiquidity()                            â”‚
â”‚                                                                  â”‚
â”‚  â±ï¸  Loading: 2000ms                                            â”‚
â”‚  ğŸ”„ executingLiquidity = true                                   â”‚
â”‚                                                                  â”‚
â”‚  Mock Transaction Execution:                                    â”‚
â”‚  1. Generate fake tx hash                                       â”‚
â”‚  2. Store tx data { hash, chainId }                            â”‚
â”‚  3. Set success state                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 8: Render LiquiditySuccessCard                           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  âœ… Liquidity position opened successfully         â”‚        â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚        â”‚
â”‚  â”‚                                                     â”‚        â”‚
â”‚  â”‚  Your ETH/1INCH position is now active            â”‚        â”‚
â”‚  â”‚  and earning fees.                                 â”‚        â”‚
â”‚  â”‚                                                     â”‚        â”‚
â”‚  â”‚  Position ID                                       â”‚        â”‚
â”‚  â”‚  12345                                             â”‚        â”‚
â”‚  â”‚                                                     â”‚        â”‚
â”‚  â”‚  Transaction Hash                                  â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚        â”‚
â”‚  â”‚  â”‚ Ethereum                     Chain ID 1 â”‚     â”‚        â”‚
â”‚  â”‚  â”‚                                          â”‚     â”‚        â”‚
â”‚  â”‚  â”‚ 0x1a2b3c4d5e6f7890...                   â”‚     â”‚        â”‚
â”‚  â”‚  â”‚                                          â”‚     â”‚        â”‚
â”‚  â”‚  â”‚ [Ver no explorer â†—]                     â”‚     â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚        â”‚
â”‚  â”‚                                                     â”‚        â”‚
â”‚  â”‚  Next Steps                                        â”‚        â”‚
â”‚  â”‚  â€¢ Earning fees from trades                       â”‚        â”‚
â”‚  â”‚  â€¢ Monitor in Portfolio                           â”‚        â”‚
â”‚  â”‚  â€¢ Remove liquidity anytime                       â”‚        â”‚
â”‚  â”‚                                                     â”‚        â”‚
â”‚  â”‚                                 [Close]            â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 9: Auto-add success message to chat                      â”‚
â”‚                                                                  â”‚
â”‚  Assistant: "âœ… Liquidity position opened successfully!        â”‚
â”‚              Your ETH/1INCH position is now active..."         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                              [END]
```

## Component Tree

```
ChatPage
  â”‚
  â”œâ”€â”€ useLiquidityFlow() â—„â”€â”€â”€ Hook with all logic
  â”‚     â”œâ”€â”€ liquidityQuote
  â”‚     â”œâ”€â”€ liquidityLoading
  â”‚     â”œâ”€â”€ liquiditySuccess
  â”‚     â”œâ”€â”€ liquidityError
  â”‚     â”œâ”€â”€ liquidityTxHashes
  â”‚     â””â”€â”€ handlers
  â”‚
  â”œâ”€â”€ {liquidityQuote && !liquiditySuccess}
  â”‚     â””â”€â”€ <LiquidityPreviewCard>
  â”‚           â”œâ”€â”€ Token Deposited Section
  â”‚           â”œâ”€â”€ Min Amounts Section
  â”‚           â”œâ”€â”€ Price Range Section
  â”‚           â”œâ”€â”€ Additional Info Section
  â”‚           â””â”€â”€ Action Buttons
  â”‚                 â”œâ”€â”€ [Cancel] â†’ handleCancelLiquidity()
  â”‚                 â””â”€â”€ [Confirm] â†’ handleConfirmLiquidity()
  â”‚
  â”œâ”€â”€ {liquiditySuccess && liquidityTxHashes.length > 0}
  â”‚     â””â”€â”€ <LiquiditySuccessCard>
  â”‚           â”œâ”€â”€ Success Header
  â”‚           â”œâ”€â”€ Position ID
  â”‚           â”œâ”€â”€ Transaction Hashes
  â”‚           â”‚     â””â”€â”€ for each tx: { hash, chainId, explorerLink }
  â”‚           â”œâ”€â”€ Next Steps
  â”‚           â””â”€â”€ [Close] â†’ handleCloseLiquiditySuccess()
  â”‚
  â””â”€â”€ {liquidityError}
        â””â”€â”€ <ErrorCard>
              â””â”€â”€ Error message display
```

## State Machine

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   IDLE      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              handleLiquidityFromMetadata()
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  LOADING    â”‚ â—„â”€â”€ liquidityLoading = true
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    API call (1.2s)
                           â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                     â”‚
             Success               Error
                â”‚                     â”‚
                â–¼                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  PREVIEW    â”‚      â”‚   ERROR     â”‚
         â”‚             â”‚      â”‚             â”‚
         â”‚ (shows card)â”‚      â”‚ (shows msg) â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                       â”‚
 Cancel                  Confirm
    â”‚                       â”‚
    â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   IDLE      â”‚     â”‚ EXECUTING   â”‚ â—„â”€â”€ executingLiquidity = true
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    Mock TX (2s)
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  SUCCESS    â”‚ â—„â”€â”€ liquiditySuccess = true
                    â”‚             â”‚
                    â”‚ (shows card)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                       Close
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   IDLE      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

```
Agent Metadata
      â”‚
      â”œâ”€â–º chain: "ethereum"
      â”œâ”€â–º token0: "ETH"
      â”œâ”€â–º token1: "1INCH"
      â”œâ”€â–º amount0: "0.278"
      â”œâ”€â–º amount1: "1.19"
      â””â”€â–º feeTier: 100
            â”‚
            â–¼
    getNetworkByName()
            â”‚
            â”œâ”€â–º chainId: 1
            â”‚
            â–¼
    getLiquidityQuote()
            â”‚
            â”œâ”€â–º Mock delay 1.2s
            â”‚
            â–¼
    QuoteResponse
            â”‚
            â”œâ”€â–º token0: { symbol, amount, decimals, usdValue }
            â”œâ”€â–º token1: { symbol, amount, decimals }
            â”œâ”€â–º priceRange: { min, max, current }
            â”œâ”€â–º feeTier: 100
            â”œâ”€â–º feeTierLabel: "0.01%"
            â”œâ”€â–º estimatedApr: "24.5"
            â”œâ”€â–º estimatedGasFee: "0.00024"
            â””â”€â–º shareOfPool: "0.00012"
                  â”‚
                  â–¼
          liquidityQuote state
                  â”‚
                  â”œâ”€â–º Renders LiquidityPreviewCard
                  â”‚
                  â–¼
          User clicks Confirm
                  â”‚
                  â–¼
    handleConfirmLiquidity()
                  â”‚
                  â”œâ”€â–º Mock delay 2s
                  â”œâ”€â–º Generate fake tx hash
                  â”‚
                  â–¼
          liquidityTxHashes state
                  â”‚
                  â”œâ”€â–º [{ hash: "0x...", chainId: 1 }]
                  â”‚
                  â–¼
          liquiditySuccess = true
                  â”‚
                  â”œâ”€â–º Renders LiquiditySuccessCard
                  â”‚
                  â–¼
          Adds message to chat
```

## Mock API Responses

### getLiquidityQuote Response

```typescript
{
  success: true,
  quote: {
    chainId: 1,
    poolAddress: "0x88e6A0c2dDD26FEEb64F039a2c41296FcB3f5640",
    token0: {
      symbol: "ETH",
      address: "native",
      amount: "0.278",
      decimals: 18,
      usdValue: "278.00"
    },
    token1: {
      symbol: "1INCH",
      address: "0x111111111117dC0aa78b770fA6A738034120C302",
      amount: "1.19",
      decimals: 18,
      usdValue: "0.00"
    },
    feeTier: 100,
    feeTierLabel: "0.01%",
    priceRange: {
      min: "3200.28",
      max: "3911.28",
      current: "3556.00"
    },
    liquidityAmount: "0.0156",
    shareOfPool: "0.00012",
    estimatedApr: "24.5",
    estimatedGasFee: "0.00024",
    estimatedGasFeeUsd: "0.85"
  }
}
```

## Error Handling

```
Try
  â”‚
  â”œâ”€â–º getNetworkByName()
  â”‚     â””â”€â–º network not found â†’ throw Error
  â”‚
  â”œâ”€â–º getLiquidityQuote()
  â”‚     â”œâ”€â–º network error â†’ throw Error
  â”‚     â””â”€â–º !success â†’ throw Error(message)
  â”‚
  â””â”€â–º Catch
        â””â”€â–º setLiquidityError(error.message)
              â””â”€â–º Renders error card
```

## Timing Diagram

```
Time (ms)
   0 â”€â”€â”€â”€â–º User clicks card
   0 â”€â”€â”€â”€â–º handleLiquidityFromMetadata() called
   0 â”€â”€â”€â”€â–º liquidityLoading = true
   0 â”€â”€â”€â”€â–º getLiquidityQuote() starts

1200 â”€â”€â”€â”€â–º Quote received
1200 â”€â”€â”€â”€â–º liquidityLoading = false
1200 â”€â”€â”€â”€â–º liquidityQuote set
1200 â”€â”€â”€â”€â–º LiquidityPreviewCard renders

[User interaction time...]

   0 â”€â”€â”€â”€â–º User clicks Confirm
   0 â”€â”€â”€â”€â–º handleConfirmLiquidity() called
   0 â”€â”€â”€â”€â–º executingLiquidity = true

2000 â”€â”€â”€â”€â–º Mock tx complete
2000 â”€â”€â”€â”€â–º executingLiquidity = false
2000 â”€â”€â”€â”€â–º liquiditySuccess = true
2000 â”€â”€â”€â”€â–º liquidityTxHashes set
2000 â”€â”€â”€â”€â–º LiquiditySuccessCard renders
```

---

This diagram shows the complete flow from user interaction to successful liquidity provision! ğŸŒŠâœ¨
